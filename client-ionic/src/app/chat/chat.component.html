<ion-menu side="end" menuId="chat" contentId="main-content">
    <ion-header>
        <ion-toolbar>
            <ion-title>
                Chat
                <span *ngIf="tablesService.currentTable" class="table-name"> - {{tablesService.currentTable.name}}</span>
            </ion-title>
            <ion-buttons slot="secondary">
                <ion-button (click)="closeChat()">
                    <ion-icon slot="icon-only" name="close"></ion-icon>
                </ion-button>
            </ion-buttons>
        </ion-toolbar>
    </ion-header>
    <ion-content #chatContent class="ion-padding-top">
        <div *ngIf="messages.length === 0" id="no-messages">
            There are no messages
        </div>
        <div *ngFor="let message of messages" class="message-container" [class.own]="message.own">
            <div class="message">
                <ion-text class="author" [color]="message.own ? 'primary' : 'medium'">{{message.author}}</ion-text>
                <div class="text">{{message.text}}</div>
            </div>
        </div>
    </ion-content>
    <ion-footer id="send">
        <ion-input id="chat-input" placeholder="Enter a Message" maxlength="500" [(ngModel)]="message"
                   (keydown.enter)="sendMessage()"></ion-input>
        <ion-button fill="clear" [disabled]="message.length === 0" (click)="sendMessage()">
            <ion-icon slot="icon-only" name="send"></ion-icon>
        </ion-button>
    </ion-footer>
</ion-menu>

<ion-fab vertical="bottom" horizontal="end" slot="fixed">
    <ion-fab-button color="light" (click)="openChat()">
        <ion-icon name="chatbubbles-sharp"></ion-icon>
    </ion-fab-button>
    <ion-badge *ngIf="unread !== 0" color="danger">{{unread}}</ion-badge>
</ion-fab>
